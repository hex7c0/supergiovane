/*
 * supergiovane v1.7.2
 * (c) hex7c0 http://supergiovane.herokuapp.com/
 * Licensed under GPL-3.0
 */
function up(){"use strict";return $("html,body").animate({scrollTop:$(".search").position().top},1200,"swing",function(){$("#search").focus()}),!1}function search($http,$scope){"use strict";$("#search").tooltip("hide"),$scope.clean(!1),$scope.versions=[];var ss=$scope.search,searchedRegex=/^([^@]*)/;ss&&angular.isString(ss)?($(".modal").modal("show"),$http({method:"GET",url:"/"+ss.replace(/@/,"/")+"/",cache:!0}).then(function(res){var data=res.data;$scope.searched=ss.match(searchedRegex)[0];try{var author=Object.create(null);data.author&&data.author.name&&(author={name:data.author.name,url:data.author.url,email:data.author.email,stat:"http://npm-stat.com/charts.html?author="+data.author.name});var npm={link:"https://www.npmjs.com/package/"+$scope.searched,stat:"http://npm-stat.com/charts.html?package="+$scope.searched};data.bugs&&data.bugs.url&&(npm.issue=data.bugs.url),$scope.npm={desc:data.description,author:author,npm:npm,license:data.license}}catch(e){$scope.npm=Object.create(null),console.error(e)}if(data.versions){var versions=Object.keys(data.versions),ii=~~versions.length;$scope.npm.versions=ii,$scope.class="col-6 col-sm-6 col-lg-4"}else{var ii=0;$scope.npm.versions=1,$scope.class="col-8 col-sm-8 col-lg-12"}try{if(ii>0){for(var scopeVersions=[],i=0;i<ii;++i){var url,tarball,version=data.versions[versions[i]];version.repository&&version.repository.url&&(url=version.repository.url),version.dist&&version.dist.tarball&&(tarball=version.dist.tarball),scopeVersions[i]={id:version._id,title:version.version,npmv:version._npmVersion,time:new Date(data.time[version.version]).toUTCString(),page:version.homepage,repo:url,url:tarball}}$scope.versions=scopeVersions.reverse()}else{var url,tarball,node,depsN=[],depsV=[];if(data.repository&&data.repository.url&&(url=data.repository.url),data.dist&&data.dist.tarball&&(tarball=data.dist.tarball),data.engines&&data.engines.node&&(node=data.engines.node),data.dependencies)for(var deps=Object.keys(data.dependencies),i=0,ii=deps.length;i<ii;++i){var dep=deps[i];depsN[i]={title:dep,url:"https://www.npmjs.com/package/"+dep,version:data.dependencies[dep]}}if(data.devDependencies)for(var deps=Object.keys(data.devDependencies),i=0,ii=deps.length;i<ii;++i){var dep=deps[i];depsV[i]={title:dep,url:"https://www.npmjs.com/package/"+dep,version:data.devDependencies[dep]}}$scope.versions[0]={id:data._id,title:data.version,npmv:data._npmVersion,page:data.homepage,repo:url,url:tarball,node:node,depsN:depsN,depsV:depsV}}}catch(e){console.error(e)}$scope.$watch($scope.versions,function(){0===ii&&$(".col-6").css("width","100%"),$(".jumbotron").show(400,function(){$(".modal").modal("hide"),$("html,body").animate({scrollTop:$("#show").position().top},1200)})})},function(){$(".jumbotron").fadeOut(400),$(".alert").fadeIn(400,function(){$(".modal").modal("hide"),$("html,body").animate({scrollTop:$(".alert").position().top},1200)})})):$("#search").tooltip("show")}var app=angular.module("supergiovane",[]);app.controller("main",["$scope","$http","$location",function($scope,$http,$location){"use strict";$scope.$on("$locationChangeSuccess",function(){$scope.search=$location.path().substring(1).replace(/\/$/,"").replace(/\//,"@"),search($http,$scope)}),$scope.clean=function(force){$(".alert").fadeOut(),$(".col-6").fadeOut(400,function(){$scope.npm=Object.create(null),$scope.versions=[],force&&($scope.search="")})},$(".alert").click(function(){return $(".alert").fadeOut()}),$(document).keypress(function(e){13===e.which&&$("#sub").click()}),$scope.button=function(item){switch(item){case"search":$location.path($scope.search.replace(/@/,"/"));break;case"clear":$scope.clean(!0),$(".jumbotron").fadeOut(400),$("#search").val(""),$("#search").focus()}}}]),$("#search").focus();
